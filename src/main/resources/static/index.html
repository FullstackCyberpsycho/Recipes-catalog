<!--<!DOCTYPE html>-->
<!--<html lang="ru">-->
<!--<head>-->
<!--    <meta charset="UTF-8">-->
<!--    <title>–ö–∞—Ç–∞–ª–æ–≥ —Ä–µ—Ü–µ–ø—Ç–æ–≤</title>-->
<!--    <style>-->
<!--        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: #f0f2f5; margin: 0; padding: 0; }-->
<!--        .container { max-width: 1000px; margin: 30px auto; background: #fff; padding: 20px 30px; border-radius: 12px; box-shadow: 0 4px 20px rgba(0,0,0,0.1); }-->
<!--        h1 { text-align: center; color: #333; margin-bottom: 20px; }-->
<!--        .controls { display: flex; gap: 10px; margin-bottom: 20px; flex-wrap: wrap; }-->
<!--        .controls input, .controls select { padding: 10px; font-size: 14px; border-radius: 6px; border: 1px solid #ccc; flex: 1; }-->
<!--        .controls button { padding: 10px 15px; background: #4CAF50; color: white; border: none; border-radius: 6px; cursor: pointer; transition: 0.2s; }-->
<!--        .controls button:hover { background: #45a049; }-->
<!--        #recipeList { display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 15px; }-->
<!--        .recipe-card { background: #fff; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); overflow: hidden; display: flex; flex-direction: column; }-->
<!--        .recipe-card img { width: 100%; height: 150px; object-fit: cover; }-->
<!--        .recipe-content { padding: 10px 15px; flex: 1; }-->
<!--        .recipe-content h3 { margin: 0 0 10px; font-size: 18px; }-->
<!--        .recipe-content p { margin: 0 0 6px; font-size: 14px; color: #555; }-->
<!--        .recipe-actions { display: flex; justify-content: space-between; padding: 10px 15px; border-top: 1px solid #eee; }-->
<!--        .recipe-actions button { flex: 1; margin: 0 5px; padding: 8px 5px; font-size: 14px; border-radius: 6px; cursor: pointer; border: none; color: #fff; transition: 0.2s; }-->
<!--        .edit-btn { background: #2196F3; } .edit-btn:hover { background: #1976D2; }-->
<!--        .delete-btn { background: #f44336; } .delete-btn:hover { background: #d32f2f; }-->
<!--        .modal { display: none; position: fixed; top:0; left:0; width:100%; height:100%; background: rgba(0,0,0,0.5); justify-content: center; align-items: center; z-index: 100; }-->
<!--        .modal-content { background: #fff; padding: 20px 30px; border-radius: 12px; width: 400px; max-width: 90%; position: relative; }-->
<!--        .modal-content h3 { margin-top: 0; }-->
<!--        .modal-content input, .modal-content textarea { width: 100%; padding: 10px; margin-bottom: 10px; border-radius: 6px; border: 1px solid #ccc; }-->
<!--        .modal-content button { padding: 10px; background: #4CAF50; color: #fff; border: none; border-radius: 6px; cursor: pointer; width: 100%; font-size: 14px; }-->
<!--        .modal-close { position: absolute; top: 10px; right: 15px; font-size: 20px; cursor: pointer; color: #888; }-->
<!--        #imagePreview { width: 100%; height: 150px; object-fit: cover; margin-bottom: 10px; border-radius: 6px; display: none; }-->
<!--    </style>-->
<!--</head>-->
<!--<body>-->
<!--<div class="container">-->
<!--    <h1>–ö–∞—Ç–∞–ª–æ–≥ —Ä–µ—Ü–µ–ø—Ç–æ–≤</h1>-->
<!--    <div class="controls">-->
<!--        <input type="text" id="search" placeholder="–ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é">-->
<!--        <select id="sort">-->
<!--            <option value="">–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞</option>-->
<!--            <option value="name-asc">–ù–∞–∑–≤–∞–Ω–∏–µ –ê-–Ø</option>-->
<!--            <option value="name-desc">–ù–∞–∑–≤–∞–Ω–∏–µ –Ø-–ê</option>-->
<!--            <option value="time-asc">–í—Ä–µ–º—è ‚Üë</option>-->
<!--            <option value="time-desc">–í—Ä–µ–º—è ‚Üì</option>-->
<!--        </select>-->
<!--        <button id="addRecipeBtn">–î–æ–±–∞–≤–∏—Ç—å —Ä–µ—Ü–µ–ø—Ç</button>-->
<!--    </div>-->
<!--    <div id="recipeList"></div>-->
<!--</div>-->

<!--<div class="modal" id="recipeModal">-->
<!--    <div class="modal-content">-->
<!--        <span class="modal-close" id="closeModal">&times;</span>-->
<!--        <h3 id="modalTitle">–ù–æ–≤—ã–π —Ä–µ—Ü–µ–ø—Ç</h3>-->
<!--        <input type="text" id="recipeName" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ" required>-->
<!--        <textarea id="recipeIngredients" placeholder="–ò–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç—ã" rows="2" required></textarea>-->
<!--        <textarea id="recipeInstructions" placeholder="–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏" rows="2" required></textarea>-->
<!--        <textarea id="recipeDescription" placeholder="–û–ø–∏—Å–∞–Ω–∏–µ" rows="2"></textarea>-->
<!--        <input type="number" id="recipeTime" placeholder="–í—Ä–µ–º—è –ø—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–∏—è (–º–∏–Ω)" required>-->
<!--        <input type="text" id="recipeImage" placeholder="URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è">-->
<!--        <img id="imagePreview" alt="–ü—Ä–µ–≤—å—é –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è">-->
<!--        <button id="saveRecipeBtn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>-->
<!--    </div>-->
<!--</div>-->

<!--<script>-->
<!--    const apiUrl = "http://localhost:8080/api/recipes";-->
<!--    let recipes = [];-->
<!--    let editId = null;-->

<!--    const recipeList = document.getElementById("recipeList");-->
<!--    const searchInput = document.getElementById("search");-->
<!--    const sortSelect = document.getElementById("sort");-->
<!--    const addRecipeBtn = document.getElementById("addRecipeBtn");-->
<!--    const modal = document.getElementById("recipeModal");-->
<!--    const closeModal = document.getElementById("closeModal");-->
<!--    const modalTitle = document.getElementById("modalTitle");-->
<!--    const recipeName = document.getElementById("recipeName");-->
<!--    const recipeIngredients = document.getElementById("recipeIngredients");-->
<!--    const recipeInstructions = document.getElementById("recipeInstructions");-->
<!--    const recipeDescription = document.getElementById("recipeDescription");-->
<!--    const recipeTime = document.getElementById("recipeTime");-->
<!--    const recipeImage = document.getElementById("recipeImage");-->
<!--    const saveRecipeBtn = document.getElementById("saveRecipeBtn");-->
<!--    const imagePreview = document.getElementById("imagePreview");-->

<!--    recipeImage.addEventListener("input", () => {-->
<!--      if(recipeImage.value){-->
<!--        imagePreview.src = recipeImage.value;-->
<!--        imagePreview.style.display = "block";-->
<!--      } else imagePreview.style.display = "none";-->
<!--    });-->

<!--    async function loadRecipes(sorted=false){-->
<!--      let url = apiUrl;-->
<!--      if(sorted){-->
<!--        const sortVal = sortSelect.value;-->
<!--        if(sortVal === "name-asc") url += "/sorted-name-ASC";-->
<!--        if(sortVal === "name-desc") url += "/sorted-name-DESC";-->
<!--        if(sortVal === "time-asc") url += "/sorted-cooking-time-ASC";-->
<!--        if(sortVal === "time-desc") url += "/sorted-cooking-time-DESC";-->
<!--      }-->
<!--      try{-->
<!--        const res = await fetch(url);-->
<!--        recipes = await res.json();-->
<!--        renderRecipes();-->
<!--      }catch(e){ console.error("–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ä–µ—Ü–µ–ø—Ç–æ–≤:", e);}-->
<!--    }-->

<!--    function renderRecipes(){-->
<!--      const search = searchInput.value.toLowerCase();-->
<!--      recipeList.innerHTML = "";-->
<!--      const filtered = recipes.filter(r => r.name.toLowerCase().includes(search));-->
<!--      if(filtered.length === 0){-->
<!--        recipeList.innerHTML = "<p>–†–µ—Ü–µ–ø—Ç–æ–≤ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ</p>";-->
<!--        return;-->
<!--      }-->
<!--      filtered.forEach(r => {-->
<!--        const card = document.createElement("div");-->
<!--        card.className = "recipe-card";-->
<!--        card.innerHTML = `-->
<!--          <img src="${r.imageUrl || 'https://via.placeholder.com/300x150'}" alt="${r.name}">-->
<!--          <div class="recipe-content">-->
<!--            <h3>${r.name}</h3>-->
<!--            <p>–í—Ä–µ–º—è: ${r.cookingTime || 0} –º–∏–Ω</p>-->
<!--            <p><strong>–ò–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç—ã:</strong> ${r.ingredients}</p>-->
<!--            <p><strong>–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏:</strong> ${r.instructions}</p>-->
<!--            <p>${r.description || ''}</p>-->
<!--          </div>-->
<!--          <div class="recipe-actions">-->
<!--            <button class="edit-btn" onclick="editRecipe(${r.id})">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</button>-->
<!--            <button class="delete-btn" onclick="deleteRecipe(${r.id})">–£–¥–∞–ª–∏—Ç—å</button>-->
<!--          </div>-->
<!--        `;-->
<!--        recipeList.appendChild(card);-->
<!--      });-->
<!--    }-->

<!--    addRecipeBtn.addEventListener("click", ()=>{-->
<!--      modalTitle.textContent = "–ù–æ–≤—ã–π —Ä–µ—Ü–µ–ø—Ç";-->
<!--      recipeName.value = recipeIngredients.value = recipeInstructions.value = recipeDescription.value = recipeTime.value = recipeImage.value = "";-->
<!--      imagePreview.style.display = "none";-->
<!--      editId = null;-->
<!--      modal.style.display = "flex";-->
<!--    });-->

<!--    closeModal.addEventListener("click", ()=> modal.style.display = "none");-->

<!--    saveRecipeBtn.addEventListener("click", async ()=>{-->
<!--      const data = {-->
<!--        name: recipeName.value,-->
<!--        ingredients: recipeIngredients.value,-->
<!--        instructions: recipeInstructions.value,-->
<!--        description: recipeDescription.value,-->
<!--        cookingTime: parseInt(recipeTime.value),-->
<!--        imageUrl: recipeImage.value-->
<!--      };-->
<!--      try{-->
<!--        if(editId){-->
<!--          await fetch(`${apiUrl}/${editId}`, {-->
<!--            method:"PUT",-->
<!--            headers: {"Content-Type":"application/json"},-->
<!--            body: JSON.stringify(data)-->
<!--          });-->
<!--        } else {-->
<!--          await fetch(apiUrl, {-->
<!--            method:"POST",-->
<!--            headers: {"Content-Type":"application/json"},-->
<!--            body: JSON.stringify(data)-->
<!--          });-->
<!--        }-->
<!--        modal.style.display="none";-->
<!--        loadRecipes();-->
<!--      }catch(e){ console.error("–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è:", e);}-->
<!--    });-->

<!--    async function deleteRecipe(id){-->
<!--      if(confirm("–£–¥–∞–ª–∏—Ç—å —Ä–µ—Ü–µ–ø—Ç?")){-->
<!--        try{-->
<!--          await fetch(`${apiUrl}/${id}`, { method:"DELETE" });-->
<!--          loadRecipes();-->
<!--        }catch(e){ console.error("–û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è:", e);}-->
<!--      }-->
<!--    }-->

<!--    function editRecipe(id){-->
<!--      const r = recipes.find(r => r.id === id);-->
<!--      modalTitle.textContent="–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä–µ—Ü–µ–ø—Ç";-->
<!--      recipeName.value = r.name;-->
<!--      recipeIngredients.value = r.ingredients;-->
<!--      recipeInstructions.value = r.instructions;-->
<!--      recipeDescription.value = r.description || '';-->
<!--      recipeTime.value = r.cookingTime;-->
<!--      recipeImage.value = r.imageUrl || '';-->
<!--      if(r.imageUrl){-->
<!--        imagePreview.src = r.imageUrl;-->
<!--        imagePreview.style.display = "block";-->
<!--      } else imagePreview.style.display = "none";-->
<!--      editId = id;-->
<!--      modal.style.display = "flex";-->
<!--    }-->

<!--    searchInput.addEventListener("input", renderRecipes);-->
<!--    sortSelect.addEventListener("change", ()=> loadRecipes(true));-->

<!--    loadRecipes(); // –∏–∑–Ω–∞—á–∞–ª—å–Ω–æ –≤—Å–µ —Ä–µ—Ü–µ–ø—Ç—ã-->
<!--</script>-->
<!--</body>-->
<!--</html>-->




<!--<!DOCTYPE html>-->
<!--<html lang="ru">-->
<!--<head>-->
<!--    <meta charset="UTF-8">-->
<!--    <title>–ö–∞—Ç–∞–ª–æ–≥ —Ä–µ—Ü–µ–ø—Ç–æ–≤</title>-->
<!--    <style>-->
<!--        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: #f0f2f5; margin: 0; padding: 0; }-->
<!--        .container { max-width: 1000px; margin: 30px auto; background: #fff; padding: 20px 30px; border-radius: 12px; box-shadow: 0 4px 20px rgba(0,0,0,0.1); }-->
<!--        h1 { text-align: center; color: #333; margin-bottom: 20px; }-->
<!--        .controls { display: flex; gap: 10px; margin-bottom: 20px; flex-wrap: wrap; }-->
<!--        .controls input, .controls select { padding: 10px; font-size: 14px; border-radius: 6px; border: 1px solid #ccc; flex: 1; }-->
<!--        .controls button { padding: 10px 15px; background: #4CAF50; color: white; border: none; border-radius: 6px; cursor: pointer; transition: 0.2s; }-->
<!--        .controls button:hover { background: #45a049; }-->
<!--        #recipeList { display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 15px; }-->
<!--        .recipe-card { background: #fff; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); overflow: hidden; display: flex; flex-direction: column; }-->
<!--        .recipe-card img { width: 100%; height: 150px; object-fit: cover; }-->
<!--        .recipe-content { padding: 10px 15px; flex: 1; }-->
<!--        .recipe-content h3 { margin: 0 0 10px; font-size: 18px; }-->
<!--        .recipe-content p { margin: 0 0 6px; font-size: 14px; color: #555; }-->
<!--        .recipe-actions { display: flex; justify-content: space-between; padding: 10px 15px; border-top: 1px solid #eee; flex-wrap: wrap; }-->
<!--        .recipe-actions button { flex: 1; margin: 5px 3px; padding: 8px 5px; font-size: 14px; border-radius: 6px; cursor: pointer; border: none; color: #fff; transition: 0.2s; }-->
<!--        .edit-btn { background: #2196F3; } .edit-btn:hover { background: #1976D2; }-->
<!--        .delete-btn { background: #f44336; } .delete-btn:hover { background: #d32f2f; }-->
<!--        .fav-btn { background: #FF9800; } .fav-btn:hover { background: #F57C00; }-->
<!--        .modal { display: none; position: fixed; top:0; left:0; width:100%; height:100%; background: rgba(0,0,0,0.5); justify-content: center; align-items: center; z-index: 100; }-->
<!--        .modal-content { background: #fff; padding: 20px 30px; border-radius: 12px; width: 400px; max-width: 90%; position: relative; }-->
<!--        .modal-content h3 { margin-top: 0; }-->
<!--        .modal-content input, .modal-content textarea { width: 100%; padding: 10px; margin-bottom: 10px; border-radius: 6px; border: 1px solid #ccc; }-->
<!--        .modal-content button { padding: 10px; background: #4CAF50; color: #fff; border: none; border-radius: 6px; cursor: pointer; width: 100%; font-size: 14px; }-->
<!--        .modal-close { position: absolute; top: 10px; right: 15px; font-size: 20px; cursor: pointer; color: #888; }-->
<!--        #imagePreview { width: 100%; height: 150px; object-fit: cover; margin-bottom: 10px; border-radius: 6px; display: none; }-->
<!--    </style>-->
<!--</head>-->
<!--<body>-->
<!--<div class="container">-->
<!--    <h1>–ö–∞—Ç–∞–ª–æ–≥ —Ä–µ—Ü–µ–ø—Ç–æ–≤</h1>-->
<!--    <div class="controls">-->
<!--        <input type="text" id="search" placeholder="–ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é">-->
<!--        <select id="sort">-->
<!--            <option value="">–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞</option>-->
<!--            <option value="name-asc">–ù–∞–∑–≤–∞–Ω–∏–µ –ê-–Ø</option>-->
<!--            <option value="name-desc">–ù–∞–∑–≤–∞–Ω–∏–µ –Ø-–ê</option>-->
<!--            <option value="time-asc">–í—Ä–µ–º—è ‚Üë</option>-->
<!--            <option value="time-desc">–í—Ä–µ–º—è ‚Üì</option>-->
<!--        </select>-->
<!--        <button id="addRecipeBtn">–î–æ–±–∞–≤–∏—Ç—å —Ä–µ—Ü–µ–ø—Ç</button>-->
<!--        <button id="showFavoritesBtn" style="background:#FF9800;">–ò–∑–±—Ä–∞–Ω–Ω–æ–µ</button>-->
<!--        <button id="showAllBtn">–í—Å–µ —Ä–µ—Ü–µ–ø—Ç—ã</button>-->
<!--    </div>-->
<!--    <div id="recipeList"></div>-->
<!--</div>-->

<!--&lt;!&ndash; –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ &ndash;&gt;-->
<!--<div class="modal" id="recipeModal">-->
<!--    <div class="modal-content">-->
<!--        <span class="modal-close" id="closeModal">&times;</span>-->
<!--        <h3 id="modalTitle">–ù–æ–≤—ã–π —Ä–µ—Ü–µ–ø—Ç</h3>-->
<!--        <input type="text" id="recipeName" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ" required>-->
<!--        <textarea id="recipeIngredients" placeholder="–ò–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç—ã" rows="2" required></textarea>-->
<!--        <textarea id="recipeInstructions" placeholder="–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏" rows="2" required></textarea>-->
<!--        <textarea id="recipeDescription" placeholder="–û–ø–∏—Å–∞–Ω–∏–µ" rows="2"></textarea>-->
<!--        <input type="number" id="recipeTime" placeholder="–í—Ä–µ–º—è –ø—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–∏—è (–º–∏–Ω)" required>-->
<!--        <input type="text" id="recipeImage" placeholder="URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è">-->
<!--        <img id="imagePreview" alt="–ü—Ä–µ–≤—å—é –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è">-->
<!--        <button id="saveRecipeBtn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>-->
<!--    </div>-->
<!--</div>-->

<!--<script>-->
<!--    const apiUrl = "http://localhost:8080/api/recipes";-->
<!--    const favUrl = "http://localhost:8080/favorites";-->

<!--    let recipes = [];-->
<!--    let favorites = [];-->
<!--    let editId = null;-->
<!--    let showingFavorites = false;-->

<!--    const recipeList = document.getElementById("recipeList");-->
<!--    const searchInput = document.getElementById("search");-->
<!--    const sortSelect = document.getElementById("sort");-->
<!--    const addRecipeBtn = document.getElementById("addRecipeBtn");-->
<!--    const showFavoritesBtn = document.getElementById("showFavoritesBtn");-->
<!--    const showAllBtn = document.getElementById("showAllBtn");-->
<!--    const modal = document.getElementById("recipeModal");-->
<!--    const closeModal = document.getElementById("closeModal");-->
<!--    const modalTitle = document.getElementById("modalTitle");-->
<!--    const recipeName = document.getElementById("recipeName");-->
<!--    const recipeIngredients = document.getElementById("recipeIngredients");-->
<!--    const recipeInstructions = document.getElementById("recipeInstructions");-->
<!--    const recipeDescription = document.getElementById("recipeDescription");-->
<!--    const recipeTime = document.getElementById("recipeTime");-->
<!--    const recipeImage = document.getElementById("recipeImage");-->
<!--    const saveRecipeBtn = document.getElementById("saveRecipeBtn");-->
<!--    const imagePreview = document.getElementById("imagePreview");-->

<!--    recipeImage.addEventListener("input", () => {-->
<!--      if(recipeImage.value){-->
<!--        imagePreview.src = recipeImage.value;-->
<!--        imagePreview.style.display = "block";-->
<!--      } else imagePreview.style.display = "none";-->
<!--    });-->

<!--    // ======================= –ó–∞–≥—Ä—É–∑–∫–∞ ========================-->
<!--    async function loadRecipes(sorted=false){-->
<!--      showingFavorites = false;-->
<!--      let url = apiUrl;-->
<!--      if(sorted){-->
<!--        const sortVal = sortSelect.value;-->
<!--        if(sortVal === "name-asc") url += "/sorted-name-ASC";-->
<!--        if(sortVal === "name-desc") url += "/sorted-name-DESC";-->
<!--        if(sortVal === "time-asc") url += "/sorted-cooking-time-ASC";-->
<!--        if(sortVal === "time-desc") url += "/sorted-cooking-time-DESC";-->
<!--      }-->
<!--      try{-->
<!--        const res = await fetch(url);-->
<!--        recipes = await res.json();-->
<!--        renderRecipes();-->
<!--      }catch(e){ console.error("–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ä–µ—Ü–µ–ø—Ç–æ–≤:", e);}-->
<!--    }-->

<!--    async function loadFavorites(){-->
<!--      showingFavorites = true;-->
<!--      try{-->
<!--        const res = await fetch(favUrl);-->
<!--        favorites = await res.json();-->
<!--        renderRecipes(favorites);-->
<!--      }catch(e){ console.error("–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ:", e);}-->
<!--    }-->

<!--    // ======================= –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ ========================-->
<!--    function renderRecipes(data){-->
<!--      const list = data || recipes;-->
<!--      const search = searchInput.value.toLowerCase();-->
<!--      recipeList.innerHTML = "";-->
<!--      const filtered = list.filter(r => r.name.toLowerCase().includes(search));-->
<!--      if(filtered.length === 0){-->
<!--        recipeList.innerHTML = "<p>–†–µ—Ü–µ–ø—Ç–æ–≤ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ</p>";-->
<!--        return;-->
<!--      }-->
<!--      filtered.forEach(r => {-->
<!--        const isFav = favorites.some(f => f.id === r.id);-->
<!--        const card = document.createElement("div");-->
<!--        card.className = "recipe-card";-->
<!--        card.innerHTML = `-->
<!--          <img src="${r.imageUrl || 'https://via.placeholder.com/300x150'}" alt="${r.name}">-->
<!--          <div class="recipe-content">-->
<!--            <h3>${r.name}</h3>-->
<!--            <p>–í—Ä–µ–º—è: ${r.cookingTime || 0} –º–∏–Ω</p>-->
<!--            <p><strong>–ò–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç—ã:</strong> ${r.ingredients}</p>-->
<!--            <p><strong>–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏:</strong> ${r.instructions}</p>-->
<!--            <p>${r.description || ''}</p>-->
<!--          </div>-->
<!--          <div class="recipe-actions">-->
<!--            <button class="edit-btn" onclick="editRecipe(${r.id})">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</button>-->
<!--            <button class="delete-btn" onclick="deleteRecipe(${r.id})">–£–¥–∞–ª–∏—Ç—å</button>-->
<!--            <button class="fav-btn" onclick="toggleFavorite(${r.id})">${isFav ? '–£–±—Ä–∞—Ç—å ‚≠ê' : '–í –∏–∑–±—Ä–∞–Ω–Ω–æ–µ ‚≠ê'}</button>-->
<!--          </div>-->
<!--        `;-->
<!--        recipeList.appendChild(card);-->
<!--      });-->
<!--    }-->

<!--    // ======================= CRUD ========================-->
<!--    addRecipeBtn.addEventListener("click", ()=>{-->
<!--      modalTitle.textContent = "–ù–æ–≤—ã–π —Ä–µ—Ü–µ–ø—Ç";-->
<!--      recipeName.value = recipeIngredients.value = recipeInstructions.value = recipeDescription.value = recipeTime.value = recipeImage.value = "";-->
<!--      imagePreview.style.display = "none";-->
<!--      editId = null;-->
<!--      modal.style.display = "flex";-->
<!--    });-->

<!--    closeModal.addEventListener("click", ()=> modal.style.display = "none");-->

<!--    saveRecipeBtn.addEventListener("click", async ()=>{-->
<!--      const data = {-->
<!--        name: recipeName.value,-->
<!--        ingredients: recipeIngredients.value,-->
<!--        instructions: recipeInstructions.value,-->
<!--        description: recipeDescription.value,-->
<!--        cookingTime: parseInt(recipeTime.value),-->
<!--        imageUrl: recipeImage.value-->
<!--      };-->
<!--      try{-->
<!--        if(editId){-->
<!--          await fetch(`${apiUrl}/${editId}`, {-->
<!--            method:"PUT",-->
<!--            headers: {"Content-Type":"application/json"},-->
<!--            body: JSON.stringify(data)-->
<!--          });-->
<!--        } else {-->
<!--          await fetch(apiUrl, {-->
<!--            method:"POST",-->
<!--            headers: {"Content-Type":"application/json"},-->
<!--            body: JSON.stringify(data)-->
<!--          });-->
<!--        }-->
<!--        modal.style.display="none";-->
<!--        loadRecipes();-->
<!--      }catch(e){ console.error("–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è:", e);}-->
<!--    });-->

<!--    async function deleteRecipe(id){-->
<!--      if(confirm("–£–¥–∞–ª–∏—Ç—å —Ä–µ—Ü–µ–ø—Ç?")){-->
<!--        try{-->
<!--          await fetch(`${apiUrl}/${id}`, { method:"DELETE" });-->
<!--          loadRecipes();-->
<!--        }catch(e){ console.error("–û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è:", e);}-->
<!--      }-->
<!--    }-->

<!--    function editRecipe(id){-->
<!--      const list = showingFavorites ? favorites : recipes;-->
<!--      const r = list.find(r => r.id === id);-->
<!--      modalTitle.textContent="–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä–µ—Ü–µ–ø—Ç";-->
<!--      recipeName.value = r.name;-->
<!--      recipeIngredients.value = r.ingredients;-->
<!--      recipeInstructions.value = r.instructions;-->
<!--      recipeDescription.value = r.description || '';-->
<!--      recipeTime.value = r.cookingTime;-->
<!--      recipeImage.value = r.imageUrl || '';-->
<!--      if(r.imageUrl){-->
<!--        imagePreview.src = r.imageUrl;-->
<!--        imagePreview.style.display = "block";-->
<!--      } else imagePreview.style.display = "none";-->
<!--      editId = id;-->
<!--      modal.style.display = "flex";-->
<!--    }-->

<!--    // ======================= –ò–∑–±—Ä–∞–Ω–Ω–æ–µ ========================-->
<!--    async function toggleFavorite(id){-->
<!--      const isFav = favorites.some(f => f.id === id);-->
<!--      try{-->
<!--        if(isFav){-->
<!--          await fetch(`${favUrl}/${id}`, { method:"DELETE" });-->
<!--        } else {-->
<!--          await fetch(`${favUrl}/${id}`, { method:"POST" });-->
<!--        }-->
<!--        await loadFavorites();-->
<!--        if(!showingFavorites) renderRecipes();-->
<!--      }catch(e){ console.error("–û—à–∏–±–∫–∞ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ:", e);}-->
<!--    }-->

<!--    // ======================= –°–æ–±—ã—Ç–∏—è ========================-->
<!--    searchInput.addEventListener("input", ()=> showingFavorites ? renderRecipes(favorites) : renderRecipes());-->
<!--    sortSelect.addEventListener("change", ()=> loadRecipes(true));-->
<!--    showFavoritesBtn.addEventListener("click", loadFavorites);-->
<!--    showAllBtn.addEventListener("click", ()=> loadRecipes());-->

<!--    // ======================= –°—Ç–∞—Ä—Ç ========================-->
<!--    loadRecipes(); // –∏–∑–Ω–∞—á–∞–ª—å–Ω–æ –≤—Å–µ —Ä–µ—Ü–µ–ø—Ç—ã-->
<!--    loadFavorites(); // –ø–æ–¥–≥—Ä—É–∑–∏–º –∏–∑–±—Ä–∞–Ω–Ω–æ–µ –¥–ª—è —Å—Ç–∞—Ç—É—Å–∞ –∫–Ω–æ–ø–æ–∫-->
<!--</script>-->
<!--</body>-->
<!--</html>-->



<!--<!DOCTYPE html>-->
<!--<html lang="ru">-->
<!--<head>-->
<!--    <meta charset="UTF-8">-->
<!--    <title>–ö–∞—Ç–∞–ª–æ–≥ —Ä–µ—Ü–µ–ø—Ç–æ–≤</title>-->
<!--    <style>-->
<!--        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: #f0f2f5; margin: 0; padding: 0; }-->
<!--        .container { max-width: 1000px; margin: 30px auto; background: #fff; padding: 20px 30px; border-radius: 12px; box-shadow: 0 4px 20px rgba(0,0,0,0.1); }-->
<!--        h1 { text-align: center; color: #333; margin-bottom: 20px; }-->
<!--        .controls { display: flex; gap: 10px; margin-bottom: 20px; flex-wrap: wrap; }-->
<!--        .controls input, .controls select { padding: 10px; font-size: 14px; border-radius: 6px; border: 1px solid #ccc; flex: 1; }-->
<!--        .controls button { padding: 10px 15px; background: #4CAF50; color: white; border: none; border-radius: 6px; cursor: pointer; transition: 0.2s; }-->
<!--        .controls button:hover { background: #45a049; }-->
<!--        #recipeList { display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 15px; }-->
<!--        .recipe-card { background: #fff; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); overflow: hidden; display: flex; flex-direction: column; }-->
<!--        .recipe-card img { width: 100%; height: 150px; object-fit: cover; }-->
<!--        .recipe-content { padding: 10px 15px; flex: 1; }-->
<!--        .recipe-content h3 { margin: 0 0 10px; font-size: 18px; }-->
<!--        .recipe-content p { margin: 0 0 6px; font-size: 14px; color: #555; }-->
<!--        .recipe-actions { display: flex; justify-content: space-between; padding: 10px 15px; border-top: 1px solid #eee; flex-wrap: wrap; }-->
<!--        .recipe-actions button { flex: 1; margin: 5px 3px; padding: 8px 5px; font-size: 14px; border-radius: 6px; cursor: pointer; border: none; color: #fff; transition: 0.2s; }-->
<!--        .edit-btn { background: #2196F3; } .edit-btn:hover { background: #1976D2; }-->
<!--        .delete-btn { background: #f44336; } .delete-btn:hover { background: #d32f2f; }-->
<!--        .fav-btn { background: #FF9800; } .fav-btn:hover { background: #F57C00; }-->
<!--        .modal { display: none; position: fixed; top:0; left:0; width:100%; height:100%; background: rgba(0,0,0,0.5); justify-content: center; align-items: center; z-index: 100; }-->
<!--        .modal-content { background: #fff; padding: 20px 30px; border-radius: 12px; width: 400px; max-width: 90%; position: relative; }-->
<!--        .modal-content h3 { margin-top: 0; }-->
<!--        .modal-content input, .modal-content textarea { width: 100%; padding: 10px; margin-bottom: 10px; border-radius: 6px; border: 1px solid #ccc; }-->
<!--        .modal-content button { padding: 10px; background: #4CAF50; color: #fff; border: none; border-radius: 6px; cursor: pointer; width: 100%; font-size: 14px; }-->
<!--        .modal-close { position: absolute; top: 10px; right: 15px; font-size: 20px; cursor: pointer; color: #888; }-->
<!--        #imagePreview { width: 100%; height: 150px; object-fit: cover; margin-bottom: 10px; border-radius: 6px; display: none; }-->
<!--    </style>-->
<!--</head>-->
<!--<body>-->
<!--<div class="container">-->
<!--    <h1>–ö–∞—Ç–∞–ª–æ–≥ —Ä–µ—Ü–µ–ø—Ç–æ–≤</h1>-->
<!--    <div class="controls">-->
<!--        <input type="text" id="search" placeholder="–ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é">-->
<!--        <select id="sort">-->
<!--            <option value="">–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞</option>-->
<!--            <option value="name-asc">–ù–∞–∑–≤–∞–Ω–∏–µ –ê-–Ø</option>-->
<!--            <option value="name-desc">–ù–∞–∑–≤–∞–Ω–∏–µ –Ø-–ê</option>-->
<!--            <option value="time-asc">–í—Ä–µ–º—è ‚Üë</option>-->
<!--            <option value="time-desc">–í—Ä–µ–º—è ‚Üì</option>-->
<!--        </select>-->
<!--        <button id="addRecipeBtn">–î–æ–±–∞–≤–∏—Ç—å —Ä–µ—Ü–µ–ø—Ç</button>-->
<!--        <button id="showFavoritesBtn" style="background:#FF9800;">–ò–∑–±—Ä–∞–Ω–Ω–æ–µ</button>-->
<!--        <button id="showAllBtn">–í—Å–µ —Ä–µ—Ü–µ–ø—Ç—ã</button>-->
<!--    </div>-->
<!--    <div id="recipeList"></div>-->
<!--</div>-->

<!--<div class="modal" id="recipeModal">-->
<!--    <div class="modal-content">-->
<!--        <span class="modal-close" id="closeModal">&times;</span>-->
<!--        <h3 id="modalTitle">–ù–æ–≤—ã–π —Ä–µ—Ü–µ–ø—Ç</h3>-->
<!--        <input type="text" id="recipeName" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ" required>-->
<!--        <textarea id="recipeIngredients" placeholder="–ò–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç—ã" rows="2" required></textarea>-->
<!--        <textarea id="recipeInstructions" placeholder="–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏" rows="2" required></textarea>-->
<!--        <textarea id="recipeDescription" placeholder="–û–ø–∏—Å–∞–Ω–∏–µ" rows="2"></textarea>-->
<!--        <input type="number" id="recipeTime" placeholder="–í—Ä–µ–º—è –ø—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–∏—è (–º–∏–Ω)" required>-->
<!--        <input type="text" id="recipeImage" placeholder="URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è">-->
<!--        <img id="imagePreview" alt="–ü—Ä–µ–≤—å—é –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è">-->
<!--        <button id="saveRecipeBtn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>-->
<!--    </div>-->
<!--</div>-->

<!--<script>-->
<!--    const apiUrl = "http://localhost:8080/api/recipes";-->
<!--    const favUrl = "http://localhost:8080/api/recipes/favorites";-->

<!--    let recipes = [];-->
<!--    let favorites = [];-->
<!--    let editId = null;-->
<!--    let showingFavorites = false;-->

<!--    const recipeList = document.getElementById("recipeList");-->
<!--    const searchInput = document.getElementById("search");-->
<!--    const sortSelect = document.getElementById("sort");-->
<!--    const addRecipeBtn = document.getElementById("addRecipeBtn");-->
<!--    const showFavoritesBtn = document.getElementById("showFavoritesBtn");-->
<!--    const showAllBtn = document.getElementById("showAllBtn");-->
<!--    const modal = document.getElementById("recipeModal");-->
<!--    const closeModal = document.getElementById("closeModal");-->
<!--    const modalTitle = document.getElementById("modalTitle");-->
<!--    const recipeName = document.getElementById("recipeName");-->
<!--    const recipeIngredients = document.getElementById("recipeIngredients");-->
<!--    const recipeInstructions = document.getElementById("recipeInstructions");-->
<!--    const recipeDescription = document.getElementById("recipeDescription");-->
<!--    const recipeTime = document.getElementById("recipeTime");-->
<!--    const recipeImage = document.getElementById("recipeImage");-->
<!--    const saveRecipeBtn = document.getElementById("saveRecipeBtn");-->
<!--    const imagePreview = document.getElementById("imagePreview");-->

<!--    recipeImage.addEventListener("input", () => {-->
<!--      if(recipeImage.value){-->
<!--        imagePreview.src = recipeImage.value;-->
<!--        imagePreview.style.display = "block";-->
<!--      } else imagePreview.style.display = "none";-->
<!--    });-->

<!--    // ======================= –ó–∞–≥—Ä—É–∑–∫–∞ ========================-->
<!--    async function loadRecipes(sorted=false){-->
<!--      showingFavorites = false;-->
<!--      let url = apiUrl;-->
<!--      if(sorted){-->
<!--        const sortVal = sortSelect.value;-->
<!--        if(sortVal === "name-asc") url += "/sorted-name-ASC";-->
<!--        if(sortVal === "name-desc") url += "/sorted-name-DESC";-->
<!--        if(sortVal === "time-asc") url += "/sorted-cooking-time-ASC";-->
<!--        if(sortVal === "time-desc") url += "/sorted-cooking-time-DESC";-->
<!--      }-->
<!--      try{-->
<!--        const res = await fetch(url);-->
<!--        recipes = await res.json();-->
<!--        renderRecipes();-->
<!--      }catch(e){ console.error("–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ä–µ—Ü–µ–ø—Ç–æ–≤:", e);}-->
<!--    }-->

<!--    async function loadFavorites(){-->
<!--      try{-->
<!--        const res = await fetch(favUrl);-->
<!--        favorites = await res.json();-->
<!--      }catch(e){ console.error("–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ:", e);}-->
<!--    }-->

<!--    // ======================= –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ ========================-->
<!--    function renderRecipes(data){-->
<!--      const list = data || recipes;-->
<!--      const search = searchInput.value.toLowerCase();-->
<!--      recipeList.innerHTML = "";-->
<!--      const filtered = list.filter(r => r.name.toLowerCase().includes(search));-->
<!--      if(filtered.length === 0){-->
<!--        recipeList.innerHTML = "<p>–†–µ—Ü–µ–ø—Ç–æ–≤ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ</p>";-->
<!--        return;-->
<!--      }-->
<!--      filtered.forEach(r => {-->
<!--        const isFav = favorites.some(f => f.id === r.id);-->
<!--        const card = document.createElement("div");-->
<!--        card.className = "recipe-card";-->
<!--        card.innerHTML = `-->
<!--          <img src="${r.imageUrl || 'https://via.placeholder.com/300x150'}" alt="${r.name}">-->
<!--          <div class="recipe-content">-->
<!--            <h3>${r.name}</h3>-->
<!--            <p>–í—Ä–µ–º—è: ${r.cookingTime || 0} –º–∏–Ω</p>-->
<!--            <p><strong>–ò–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç—ã:</strong> ${r.ingredients}</p>-->
<!--            <p><strong>–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏:</strong> ${r.instructions}</p>-->
<!--            <p>${r.description || ''}</p>-->
<!--          </div>-->
<!--          <div class="recipe-actions">-->
<!--            <button class="edit-btn" onclick="editRecipe(${r.id})">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</button>-->
<!--            <button class="delete-btn" onclick="deleteRecipe(${r.id})">–£–¥–∞–ª–∏—Ç—å</button>-->
<!--            <button class="fav-btn" onclick="toggleFavorite(${r.id})">${isFav ? '–£–±—Ä–∞—Ç—å ‚≠ê' : '–í –∏–∑–±—Ä–∞–Ω–Ω–æ–µ ‚≠ê'}</button>-->
<!--          </div>-->
<!--        `;-->
<!--        recipeList.appendChild(card);-->
<!--      });-->
<!--    }-->

<!--    // ======================= CRUD ========================-->
<!--    addRecipeBtn.addEventListener("click", ()=> {-->
<!--      modalTitle.textContent = "–ù–æ–≤—ã–π —Ä–µ—Ü–µ–ø—Ç";-->
<!--      recipeName.value = recipeIngredients.value = recipeInstructions.value = recipeDescription.value = recipeTime.value = recipeImage.value = "";-->
<!--      imagePreview.style.display = "none";-->
<!--      editId = null;-->
<!--      modal.style.display = "flex";-->
<!--    });-->

<!--    closeModal.addEventListener("click", ()=> modal.style.display = "none");-->

<!--    saveRecipeBtn.addEventListener("click", async ()=> {-->
<!--      const data = {-->
<!--        name: recipeName.value,-->
<!--        ingredients: recipeIngredients.value,-->
<!--        instructions: recipeInstructions.value,-->
<!--        description: recipeDescription.value,-->
<!--        cookingTime: parseInt(recipeTime.value),-->
<!--        imageUrl: recipeImage.value-->
<!--      };-->
<!--      try{-->
<!--        if(editId){-->
<!--          await fetch(`${apiUrl}/${editId}`, {-->
<!--            method:"PUT",-->
<!--            headers: {"Content-Type":"application/json"},-->
<!--            body: JSON.stringify(data)-->
<!--          });-->
<!--        } else {-->
<!--          await fetch(apiUrl, {-->
<!--            method:"POST",-->
<!--            headers: {"Content-Type":"application/json"},-->
<!--            body: JSON.stringify(data)-->
<!--          });-->
<!--        }-->
<!--        modal.style.display="none";-->
<!--        await loadRecipes();-->
<!--        await loadFavorites();-->
<!--      }catch(e){ console.error("–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è:", e);}-->
<!--    });-->

<!--    async function deleteRecipe(id){-->
<!--      if(confirm("–£–¥–∞–ª–∏—Ç—å —Ä–µ—Ü–µ–ø—Ç?")){-->
<!--        try{-->
<!--          await fetch(`${apiUrl}/${id}`, { method:"DELETE" });-->
<!--          await loadRecipes();-->
<!--          await loadFavorites();-->
<!--        }catch(e){ console.error("–û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è:", e);}-->
<!--      }-->
<!--    }-->

<!--    function editRecipe(id){-->
<!--      const list = showingFavorites ? favorites : recipes;-->
<!--      const r = list.find(r => r.id === id);-->
<!--      modalTitle.textContent="–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä–µ—Ü–µ–ø—Ç";-->
<!--      recipeName.value = r.name;-->
<!--      recipeIngredients.value = r.ingredients;-->
<!--      recipeInstructions.value = r.instructions;-->
<!--      recipeDescription.value = r.description || '';-->
<!--      recipeTime.value = r.cookingTime;-->
<!--      recipeImage.value = r.imageUrl || '';-->
<!--      if(r.imageUrl){-->
<!--        imagePreview.src = r.imageUrl;-->
<!--        imagePreview.style.display = "block";-->
<!--      } else imagePreview.style.display = "none";-->
<!--      editId = id;-->
<!--      modal.style.display = "flex";-->
<!--    }-->

<!--    // ======================= –ò–∑–±—Ä–∞–Ω–Ω–æ–µ ========================-->
<!--    async function toggleFavorite(id){-->
<!--      try{-->
<!--        const isFav = favorites.some(f => f.id === id);-->
<!--        const method = isFav ? "DELETE" : "POST";-->
<!--        const res = await fetch(`${favUrl}/${id}`, { method });-->
<!--        if(!res.ok){-->
<!--          console.error("–û—à–∏–±–∫–∞ –∑–∞–ø—Ä–æ—Å–∞:", await res.text());-->
<!--          return;-->
<!--        }-->
<!--        await loadFavorites();-->
<!--        renderRecipes();-->
<!--      }catch(e){ console.error("–û—à–∏–±–∫–∞ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ:", e);}-->
<!--    }-->

<!--    // ======================= –°–æ–±—ã—Ç–∏—è ========================-->
<!--    searchInput.addEventListener("input", ()=> renderRecipes());-->
<!--    sortSelect.addEventListener("change", ()=> loadRecipes(true));-->
<!--    showFavoritesBtn.addEventListener("click", async ()=> {-->
<!--      showingFavorites = true;-->
<!--      await loadFavorites();-->
<!--      renderRecipes(favorites);-->
<!--    });-->
<!--    showAllBtn.addEventListener("click", async ()=> {-->
<!--      showingFavorites = false;-->
<!--      await loadRecipes();-->
<!--      renderRecipes();-->
<!--    });-->

<!--    // ======================= –°—Ç–∞—Ä—Ç ========================-->
<!--    async function init(){-->
<!--      await loadRecipes();-->
<!--      await loadFavorites();-->
<!--      renderRecipes();-->
<!--    }-->
<!--    init();-->
<!--</script>-->
<!--</body>-->
<!--</html>-->





<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>–ö–∞—Ç–∞–ª–æ–≥ —Ä–µ—Ü–µ–ø—Ç–æ–≤</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #f0f2f5;
            margin: 0;
            padding: 0;
        }
        .container {
            max-width: 1000px;
            margin: 30px auto;
            background: #fff;
            padding: 20px 30px;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        }
        h1 { text-align: center; color: #333; margin-bottom: 20px; }
        .controls { display: flex; gap: 10px; margin-bottom: 20px; flex-wrap: wrap; }
        .controls input, .controls select {
            padding: 10px;
            font-size: 14px;
            border-radius: 6px;
            border: 1px solid #ccc;
            flex: 1;
        }
        .controls button {
            padding: 10px 15px;
            background: #4CAF50;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            transition: 0.2s;
        }
        .controls button:hover { background: #45a049; }

        #recipeList {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 15px;
        }
        .recipe-card {
            background: #fff;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            overflow: hidden;
            display: flex;
            flex-direction: column;
            transition: transform 0.2s;
        }
        .recipe-card:hover { transform: translateY(-3px); }
        .recipe-card img { width: 100%; height: 150px; object-fit: cover; }
        .recipe-content { padding: 10px 15px; flex: 1; }
        .recipe-content h3 { margin: 0 0 10px; font-size: 18px; }
        .recipe-content p { margin: 0 0 6px; font-size: 14px; color: #555; }

        .recipe-actions {
            display: flex;
            justify-content: flex-end;
            padding: 8px 10px;
            gap: 5px;
        }
        .recipe-actions button {
            padding: 5px 8px;
            font-size: 13px;
            border-radius: 5px;
            cursor: pointer;
            border: none;
            color: #fff;
            transition: 0.2s;
        }
        .edit-btn { background: #2196F3; }
        .edit-btn:hover { background: #1976D2; }
        .delete-btn { background: #f44336; }
        .delete-btn:hover { background: #d32f2f; }
        .fav-btn { background: #FF9800; }
        .fav-btn:hover { background: #F57C00; }

        .modal { display: none; position: fixed; top:0; left:0; width:100%; height:100%; background: rgba(0,0,0,0.5); justify-content: center; align-items: center; z-index: 100; }
        .modal-content { background: #fff; padding: 20px 30px; border-radius: 12px; width: 400px; max-width: 90%; position: relative; }
        .modal-content h3 { margin-top: 0; }
        .modal-content input, .modal-content textarea {
            width: 100%;
            padding: 10px;
            margin-bottom: 10px;
            border-radius: 6px;
            border: 1px solid #ccc;
        }
        .modal-content button {
            padding: 10px;
            background: #4CAF50;
            color: #fff;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            width: 100%;
            font-size: 14px;
        }
        .modal-close {
            position: absolute;
            top: 10px;
            right: 15px;
            font-size: 20px;
            cursor: pointer;
            color: #888;
        }
        #imagePreview {
            width: 100%;
            height: 150px;
            object-fit: cover;
            margin-bottom: 10px;
            border-radius: 6px;
            display: none;
        }
    </style>
</head>
<body>
<div class="container">
    <h1>–ö–∞—Ç–∞–ª–æ–≥ —Ä–µ—Ü–µ–ø—Ç–æ–≤</h1>
    <div class="controls">
        <input type="text" id="search" placeholder="–ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é">
        <select id="sort">
            <option value="">–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞</option>
            <option value="name-asc">–ù–∞–∑–≤–∞–Ω–∏–µ –ê-–Ø</option>
            <option value="name-desc">–ù–∞–∑–≤–∞–Ω–∏–µ –Ø-–ê</option>
            <option value="time-asc">–í—Ä–µ–º—è ‚Üë</option>
            <option value="time-desc">–í—Ä–µ–º—è ‚Üì</option>
        </select>
        <button id="addRecipeBtn">–î–æ–±–∞–≤–∏—Ç—å —Ä–µ—Ü–µ–ø—Ç</button>
        <button id="showFavoritesBtn" style="background:#FF9800;">–ò–∑–±—Ä–∞–Ω–Ω–æ–µ</button>
        <button id="showAllBtn">–í—Å–µ —Ä–µ—Ü–µ–ø—Ç—ã</button>
    </div>
    <div id="recipeList"></div>
</div>

<div class="modal" id="recipeModal">
    <div class="modal-content">
        <span class="modal-close" id="closeModal">&times;</span>
        <h3 id="modalTitle">–ù–æ–≤—ã–π —Ä–µ—Ü–µ–ø—Ç</h3>
        <input type="text" id="recipeName" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ" required>
        <textarea id="recipeIngredients" placeholder="–ò–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç—ã" rows="2" required></textarea>
        <textarea id="recipeInstructions" placeholder="–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏" rows="2" required></textarea>
        <textarea id="recipeDescription" placeholder="–û–ø–∏—Å–∞–Ω–∏–µ" rows="2"></textarea>
        <input type="number" id="recipeTime" placeholder="–í—Ä–µ–º—è –ø—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–∏—è (–º–∏–Ω)" required>
        <input type="text" id="recipeImage" placeholder="URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è">
        <img id="imagePreview" alt="–ü—Ä–µ–≤—å—é –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è">
        <button id="saveRecipeBtn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
    </div>
</div>

<script>
    const apiUrl = "http://localhost:8080/api/recipes";
    const favUrl = "http://localhost:8080/api/recipes/favorites";

    let recipes = [], favorites = [], editId = null, showingFavorites = false;

    const recipeList = document.getElementById("recipeList");
    const searchInput = document.getElementById("search");
    const sortSelect = document.getElementById("sort");
    const addRecipeBtn = document.getElementById("addRecipeBtn");
    const showFavoritesBtn = document.getElementById("showFavoritesBtn");
    const showAllBtn = document.getElementById("showAllBtn");
    const modal = document.getElementById("recipeModal");
    const closeModal = document.getElementById("closeModal");
    const modalTitle = document.getElementById("modalTitle");
    const recipeName = document.getElementById("recipeName");
    const recipeIngredients = document.getElementById("recipeIngredients");
    const recipeInstructions = document.getElementById("recipeInstructions");
    const recipeDescription = document.getElementById("recipeDescription");
    const recipeTime = document.getElementById("recipeTime");
    const recipeImage = document.getElementById("recipeImage");
    const saveRecipeBtn = document.getElementById("saveRecipeBtn");
    const imagePreview = document.getElementById("imagePreview");

    // –ü—Ä–µ–≤—å—é –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
    recipeImage.addEventListener("input", () => {
        if(recipeImage.value){
            imagePreview.src = recipeImage.value;
            imagePreview.style.display = "block";
        } else imagePreview.style.display = "none";
    });

    // –ó–∞–≥—Ä—É–∑–∫–∞ —Ä–µ—Ü–µ–ø—Ç–æ–≤
    async function loadRecipes(sorted=false){
        showingFavorites = false;
        let url = apiUrl;
        if(sorted){
            const sortVal = sortSelect.value;
            if(sortVal === "name-asc") url += "/sorted-name-ASC";
            if(sortVal === "name-desc") url += "/sorted-name-DESC";
            if(sortVal === "time-asc") url += "/sorted-cooking-time-ASC";
            if(sortVal === "time-desc") url += "/sorted-cooking-time-DESC";
        }
        try{ const res = await fetch(url); recipes = await res.json(); renderRecipes(); }
        catch(e){ console.error("–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ä–µ—Ü–µ–ø—Ç–æ–≤:", e);}
    }

    async function loadFavorites(){
        try{ const res = await fetch(favUrl); favorites = await res.json(); }
        catch(e){ console.error("–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ:", e);}
    }

    // –†–µ–Ω–¥–µ—Ä –∫–∞—Ä—Ç–æ—á–µ–∫
    function renderRecipes(data){
        const list = data || recipes;
        const search = searchInput.value.toLowerCase();
        recipeList.innerHTML = "";
        const filtered = list.filter(r => r.name.toLowerCase().includes(search));
        if(filtered.length === 0){ recipeList.innerHTML = "<p>–†–µ—Ü–µ–ø—Ç–æ–≤ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ</p>"; return; }
        filtered.forEach(r => {
            const isFav = favorites.some(f => f.id === r.id);
            const card = document.createElement("div");
            card.className = "recipe-card";
            card.innerHTML = `
              <img src="${r.imageUrl || 'https://via.placeholder.com/300x150'}" alt="${r.name}">
              <div class="recipe-content">
                <h3>${r.name}</h3>
                <p>–í—Ä–µ–º—è: ${r.cookingTime || 0} –º–∏–Ω</p>
                <p><strong>–ò–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç—ã:</strong> ${r.ingredients}</p>
                <p><strong>–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏:</strong> ${r.instructions}</p>
                <p>${r.description || ''}</p>
              </div>
              <div class="recipe-actions">
                <button class="edit-btn" onclick="editRecipe(${r.id})">‚úèÔ∏è</button>
                <button class="delete-btn" onclick="deleteRecipe(${r.id})">üóëÔ∏è</button>
                <button class="fav-btn" onclick="toggleFavorite(${r.id})">${isFav ? '‚≠ê' : '‚òÜ'}</button>
              </div>
            `;
            recipeList.appendChild(card);
        });
    }

    // CRUD –∏ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ
    addRecipeBtn.addEventListener("click", ()=> {
        modalTitle.textContent = "–ù–æ–≤—ã–π —Ä–µ—Ü–µ–ø—Ç";
        recipeName.value = recipeIngredients.value = recipeInstructions.value = recipeDescription.value = recipeTime.value = recipeImage.value = "";
        imagePreview.style.display = "none";
        editId = null;
        modal.style.display = "flex";
    });
    closeModal.addEventListener("click", ()=> modal.style.display = "none");
    saveRecipeBtn.addEventListener("click", async ()=> {
        const data = { name: recipeName.value, ingredients: recipeIngredients.value, instructions: recipeInstructions.value,
            description: recipeDescription.value, cookingTime: parseInt(recipeTime.value), imageUrl: recipeImage.value };
        try{
            if(editId){
                await fetch(`${apiUrl}/${editId}`, { method:"PUT", headers: {"Content-Type":"application/json"}, body: JSON.stringify(data) });
            } else {
                await fetch(apiUrl, { method:"POST", headers: {"Content-Type":"application/json"}, body: JSON.stringify(data) });
            }
            modal.style.display="none";
            await loadRecipes();
            await loadFavorites();
        }catch(e){ console.error("–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è:", e);}
    });
    async function deleteRecipe(id){
        if(confirm("–£–¥–∞–ª–∏—Ç—å —Ä–µ—Ü–µ–ø—Ç?")){
            try{ await fetch(`${apiUrl}/${id}`, { method:"DELETE" }); await loadRecipes(); await loadFavorites(); }
            catch(e){ console.error("–û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è:", e);}
        }
    }
    function editRecipe(id){
        const list = showingFavorites ? favorites : recipes;
        const r = list.find(r => r.id === id);
        modalTitle.textContent="–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä–µ—Ü–µ–ø—Ç";
        recipeName.value = r.name;
        recipeIngredients.value = r.ingredients;
        recipeInstructions.value = r.instructions;
        recipeDescription.value = r.description || '';
        recipeTime.value = r.cookingTime;
        recipeImage.value = r.imageUrl || '';
        if(r.imageUrl){ imagePreview.src = r.imageUrl; imagePreview.style.display = "block"; }
        else imagePreview.style.display = "none";
        editId = id;
        modal.style.display = "flex";
    }
    async function toggleFavorite(id){
    try{
        const isFav = favorites.some(f => f.id === id);
        const method = isFav ? "DELETE" : "POST";
        const res = await fetch(`${favUrl}/${id}`, { method });
        if(!res.ok){
            console.error("–û—à–∏–±–∫–∞ –∑–∞–ø—Ä–æ—Å–∞:", await res.text());
            return;
        }

        await loadFavorites(); // –æ–±–Ω–æ–≤–ª—è–µ–º –∏–∑–±—Ä–∞–Ω–Ω–æ–µ

        // –µ—Å–ª–∏ –º—ã —Å–µ–π—á–∞—Å –≤ —Ä–∞–∑–¥–µ–ª–µ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ, —Ä–µ–Ω–¥–µ—Ä–∏–º —Ç–æ–ª—å–∫–æ favorites
        if(showingFavorites){
            renderRecipes(favorites);
        } else {
            renderRecipes();
        }

    } catch(e){ console.error("–û—à–∏–±–∫–∞ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ:", e);}
}


    // –°–æ–±—ã—Ç–∏—è
    searchInput.addEventListener("input", ()=> renderRecipes());
    sortSelect.addEventListener("change", ()=> loadRecipes(true));
    showFavoritesBtn.addEventListener("click", async ()=> { showingFavorites = true; await loadFavorites(); renderRecipes(favorites); });
    showAllBtn.addEventListener("click", async ()=> { showingFavorites = false; await loadRecipes(); renderRecipes(); });

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
    async function init(){ await loadRecipes(); await loadFavorites(); renderRecipes(); }
    init();
</script>
</body>
</html>
